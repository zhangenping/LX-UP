<!--pages/user/profile.wxml-->
<!-- pages/my/index.wxml -->
<view class="page-container">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}"></image>
      <view class="user-detail">
        <text class="username">{{userInfo.nickName || '微信用户'}}</text>
        <text class="user-role">学员</text>
      </view>
    </view>
    <view class="stats">
      <view class="stat-item" bindtap="goToSubscriptions">
        <text class="stat-value">{{subscriptionCount}}</text>
        <text class="stat-label">已订阅</text>
      </view>
      <view class="stat-item" bindtap="goToVerifyCodes">
        <text class="stat-value">{{verifyCodeCount}}</text>
        <text class="stat-label">核销码</text>
      </view>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view class="menu-list">
      <!-- 我的订阅 -->
      <navigator url="/pages/user/subscriptions/subscriptions" class="menu-item">
        <view class="menu-icon">
          <van-icon name="orders-o" size="20px" color="#07c160" />
        </view>
        <text class="menu-text">我的订阅</text>
        <view class="menu-badge" wx:if="{{subscriptionCount > 0}}">{{subscriptionCount}}</view>
        <van-icon name="arrow" size="14px" color="#ccc" />
      </navigator>

      <!-- 我的核销码 -->
      <navigator url="/pages/user/verify-codes/verify-codes" class="menu-item">
        <view class="menu-icon">
          <van-icon name="qr" size="20px" color="#1989fa" />
        </view>
        <text class="menu-text">我的核销码</text>
        <view class="menu-badge" wx:if="{{verifyCodeCount > 0}}">{{verifyCodeCount}}</view>
        <van-icon name="arrow" size="14px" color="#ccc" />
      </navigator>
    </view>
  </view>
</view>