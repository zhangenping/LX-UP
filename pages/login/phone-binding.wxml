<!-- pages/login/phone-binding.wxml -->
<view class="phone-binding-container">
  <!-- 1. 图片背景层 -->
  <image class="background-image" src="../../images/binding_bg.png" mode="aspectFill"></image>
  <view class="background-mask"></view>

  <!-- 3. 以下是原有的所有内容层 -->
  <!-- 进度指示 -->
  <view class="progress-steps">
    <view class="step active">
      <view class="step-number">1</view>
      <text class="step-text">微信授权</text>
    </view>
    <view class="step active">
      <view class="step-number">2</view>
      <text class="step-text">绑定手机</text>
    </view>
    <view class="step">
      <view class="step-number">3</view>
      <text class="step-text">选择身份</text>
    </view>
  </view>

  <!-- 用户信息展示 -->
  <view class="user-info-card">
    <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
    <text class="user-nickname">{{userInfo.nickName}}</text>
    <text class="welcome-text">欢迎使用学习平台</text>
  </view>

  <!-- 手机号绑定表单 -->
  <view class="phone-form">
    <view class="form-title">请绑定您的手机号</view>
    <view class="form-desc">用于身份验证和重要通知</view>

    <view class="input-group">
      <view class="input-item">
        <text class="input-label">手机号</text>
         <view class="input-with-icon"> <!-- 新增一个容器包裹图标和输入框 -->
          <text class="input-icon iconfont"></text>      
          <input 
            class="phone-input" 
            type="number" 
            placeholder="请输入手机号码" 
            maxlength="11"
            value="{{phoneNumber}}"
            bindinput="onPhoneInput"
          />
        </view>
      </view>

      <view class="input-item">
        <text class="input-label">验证码</text>
        
        <view class="verify-code-group">
          <view class="input-with-icon">
            <text class="input-icon iconfont"></text>
            <input 
            class="code-input" 
            type="number" 
            placeholder="请输入验证码" 
            maxlength="6"
            value="{{verifyCode}}"
            bindinput="onCodeInput"
          />
        </view>
          
          <button 
            class="get-code-btn {{canGetCode ? '' : 'disabled'}}" 
            bindtap="getVerifyCode"
            disabled="{{!canGetCode || countdown > 0}}"
          >
            {{countdown > 0 ? countdown + 's后重新获取' : '获取验证码'}}
          </button>
        </view>
      </view>
    </view>

    <button 
      class="next-btn {{canSubmit ? '' : 'disabled'}}" 
      bindtap="verifyAndNext"
      disabled="{{!canSubmit}}"
    >
      下一步，选择身份
    </button>
  </view>

  <!-- 跳过提示 -->
  <view class="skip-tip" bindtap="showSkipConfirm">
    <text>暂时跳过？</text>
  </view>
</view>